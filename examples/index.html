<!DOCTYPE html>
<html>
  <head>
    <title>Conditions Demo</title>
    <script src="{{static_files_url}}/rules/lib/vendor/jquery.js" type="text/javascript"></script>
    <script src="{{static_files_url}}/rules/lib/business-rules/conditions-builder.js" type="text/javascript"></script>
    <script src="{{static_files_url}}/rules/lib/business-rules/actions-builder.js" type="text/javascript"></script>
    <link rel="stylesheet" href="{{static_files_url}}/rules/examples/css/demo.css" />
    <script type="text/javascript">
    function submit() {
      var data = JSON.stringify({
        "conditions": $("#conditions").conditionsBuilder("data"),
        "actions": $("#actions").actionsBuilder("data")
      }, null, 4);
      $("#request").html("<pre>" + data + "</pre>");
      $.post(
         "/rules/run",
         data,
         function(response) {
           $("#response").html(response);
         }
       );
    }
    $(function() {
      $.getJSON("/rules/data", function(data) {
        $("#conditions").conditionsBuilder(data);
        $("#actions").actionsBuilder(data);
      });
    });
    </script>
  </head>
  <body>
    <h1>Conditions and Actions Demo</h1>

    <h3>When these conditions are met...</h3>
    <div id="conditions"></div>

    <h3>Do these actions...</h3>
    <div id="actions"></div>

    <button id="submit" type="button" onclick="submit()">Submit</button>

    <hr/>
    <h3>Request Rule JSON</h3>
    <div id="request"></div>
    <hr/>
    <h3>Response</h3>
    <div id="response"></div>
  </body>
</html>

